(()=>{"use strict";const e=window.React,{__}=window.wp.i18n,{registerPlugin:t}=window.wp.plugins,{ExperimentalOrderShippingPackages:n,extensionCartUpdate:o}=window.wc.blocksCheckout,{Button:c}=window.wc.blocksCheckout,{getSetting:i}=window.wc.wcSettings,{useSelect:a}=window.wp.data,{PAYMENT_STORE_KEY:r}=window.wc.wcBlocksData,s="furgonetka-pickup-point",p=({cart:t,extensions:n})=>{const p=(i(s+"_data")||{}).furgonetka_service_by_shipping_rate_id||{},l="cod"===a((e=>e(r).getActivePaymentMethod())),d=function(e){const t=e&&e.shippingRates&&e.shippingRates[0]&&e.shippingRates[0].shipping_rates;if(!t)return;const n=t.find((e=>e.selected));if(!n)return;const o=n.rate_id;return p[o]}(t);function u(e){var t;let n=null!==(t=e.country)&&void 0!==t?t:"PL";return e&&e.city&&e.address_1?{city:e.city,street:e.address_1,countryCode:n}:{countryCode:n}}if(!t.cartNeedsShipping||!d)return null;const w=l?n.furgonetka.selected_point_cod:n.furgonetka.selected_point,g=Boolean(w.code);return(0,e.createElement)("div",{className:"furgonetka-wc-blocks-pickup-point-block-container"},(0,e.createElement)("p",{className:"furgonetka-wc-blocks-pickup-point-block-button-container"},(0,e.createElement)(c,{onClick:function(){"function"!=typeof window.Furgonetka.Map&&alert(__("There was a problem loading the map. Please try again.","furgonetka"));let e=u(t.shippingAddress)||u(t.billingAddress)||{},n={courierServices:[d],pointTypesFilter:[],mapBounds:"PL"===e.countryCode?"pl":"eu",countryCodesFilter:[e.countryCode]};l&&n.pointTypesFilter.push("cod"),new window.Furgonetka.Map({...n,...e,callback:e=>o({namespace:"furgonetka",data:[{action:l?"set_point_cod":"set_point",payload:{service:d,service_type:e.service_type,code:e.code,name:e.name}}]})}).view()}},__(g?"Change point":"Select point","furgonetka"))),g?(0,e.createElement)("p",{className:"furgonetka-wc-blocks-pickup-point-block-label"},w.name," (",w.code,")"):null)};t(s,{render:()=>(0,e.createElement)(n,null,(0,e.createElement)(p,null)),scope:"woocommerce-checkout"})})();